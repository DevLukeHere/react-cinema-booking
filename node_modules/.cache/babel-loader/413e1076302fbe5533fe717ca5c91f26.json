{"ast":null,"code":"import _toConsumableArray from \"/Users/luke/Desktop/personal-projects/lukewzk-20220629/react-cinema-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/luke/Desktop/personal-projects/lukewzk-20220629/react-cinema-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/luke/Desktop/personal-projects/lukewzk-20220629/react-cinema-app/src/components/Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Navbar from \"./Navbar\";\nimport { Typography, Toolbar, Container, Grid, Fab } from \"@mui/material\";\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\nimport MovieCard from \"./MovieCard\";\nimport Filters from \"./Filters\";\nexport default function Home() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      movies = _useState2[0],\n      setMovies = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState(\"release_date.desc\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      filter = _useState8[0],\n      setFilter = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      showTopButton = _useState10[0],\n      setShowTopButton = _useState10[1];\n\n  useEffect(function () {\n    window.addEventListener(\"scroll\", function () {\n      console.log(window.screenY);\n\n      if (window.screenY > 400) {\n        setShowTopButton(true);\n      } else {\n        setShowTopButton(false);\n      }\n    });\n  }, []);\n\n  var onChangeFilters = function onChangeFilters(value) {\n    setFilter(value);\n  };\n\n  var loadMoreMovies = function loadMoreMovies() {\n    setLoading(true);\n    axios.get(\"http://api.themoviedb.org/3/discover/movie?api_key=328c283cd27bd1877d9080ccb1604c91&include_adult=false&page=\".concat(page, \"&primary_release_year=2021&language=en-US&region=us&sort_by=\").concat(filter)).then(function (res) {\n      var movies = res.data.results;\n      movies.forEach(function (movie, index) {\n        setMovies(function (prev) {\n          return [].concat(_toConsumableArray(prev), [movie]);\n        });\n      });\n      setLoading(false);\n    });\n  };\n\n  var handlePage = function handlePage() {\n    setPage(function (prev) {\n      return prev + 1;\n    });\n  };\n\n  useEffect(function () {\n    loadMoreMovies();\n  }, [page]);\n  useEffect(function () {\n    setLoading(true);\n    axios.get(\"http://api.themoviedb.org/3/discover/movie?api_key=328c283cd27bd1877d9080ccb1604c91&include_adult=false&page=\".concat(page, \"&primary_release_year=2021&language=en-US&region=us&sort_by=\").concat(filter)).then(function (res) {\n      var movies = res.data.results;\n      setMovies(movies);\n      setLoading(false);\n    });\n  }, [filter]);\n\n  var goToTop = function goToTop() {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"hsl(40, 10%, 94%)\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, showTopButton ? /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"up\",\n    style: {\n      position: \"fixed\",\n      right: \"5%\",\n      bottom: \"5%\"\n    },\n    onClick: goToTop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardArrowUpIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  })) : null, /*#__PURE__*/React.createElement(Filters, {\n    filter: filter,\n    setFilter: setFilter,\n    onChangeFilters: onChangeFilters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MovieCard, {\n    movies: movies,\n    handlePage: handlePage,\n    loadMoreMovies: loadMoreMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), loading && /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    style: {\n      color: \"#ffffff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"loading...\"))));\n}","map":{"version":3,"names":["React","useState","useEffect","axios","Navbar","Typography","Toolbar","Container","Grid","Fab","KeyboardArrowUpIcon","MovieCard","Filters","Home","movies","setMovies","loading","setLoading","page","setPage","filter","setFilter","showTopButton","setShowTopButton","window","addEventListener","console","log","screenY","onChangeFilters","value","loadMoreMovies","get","then","res","data","results","forEach","movie","index","prev","handlePage","goToTop","scrollTo","top","behavior","background","position","right","bottom","color"],"sources":["/Users/luke/Desktop/personal-projects/lukewzk-20220629/react-cinema-app/src/components/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Navbar from \"./Navbar\";\nimport { Typography, Toolbar, Container, Grid, Fab } from \"@mui/material\";\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\nimport MovieCard from \"./MovieCard\";\nimport Filters from \"./Filters\";\n\nexport default function Home() {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [filter, setFilter] = useState(\"release_date.desc\");\n  const [showTopButton, setShowTopButton] = useState(false);\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", () => {\n      console.log(window.screenY)\n      if (window.screenY > 400) {\n        setShowTopButton(true);\n      } else {\n        setShowTopButton(false);\n      }\n    });\n  }, []);\n\n  const onChangeFilters = (value) => {\n    setFilter(value);\n  };\n\n  const loadMoreMovies = () => {\n    setLoading(true);\n    axios\n      .get(\n        `http://api.themoviedb.org/3/discover/movie?api_key=328c283cd27bd1877d9080ccb1604c91&include_adult=false&page=${page}&primary_release_year=2021&language=en-US&region=us&sort_by=${filter}`\n      )\n      .then((res) => {\n        const movies = res.data.results;\n\n        movies.forEach((movie, index) => {\n          setMovies((prev) => [...prev, movie]);\n        });\n\n        setLoading(false);\n      });\n  };\n\n  const handlePage = () => {\n    setPage((prev) => prev + 1);\n  };\n\n  useEffect(() => {\n    loadMoreMovies();\n  }, [page]);\n\n  useEffect(() => {\n    setLoading(true);\n    axios\n      .get(\n        `http://api.themoviedb.org/3/discover/movie?api_key=328c283cd27bd1877d9080ccb1604c91&include_adult=false&page=${page}&primary_release_year=2021&language=en-US&region=us&sort_by=${filter}`\n      )\n      .then((res) => {\n        const movies = res.data.results;\n\n        setMovies(movies);\n\n        setLoading(false);\n      });\n  }, [filter]);\n\n  const goToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\",\n    });\n  };\n\n  return (\n    <div style={{ background: \"hsl(40, 10%, 94%)\", position: \"relative\" }}>\n      <Navbar />\n      <Toolbar />\n      <Container>\n        {showTopButton ? (\n          <Fab\n            color=\"primary\"\n            aria-label=\"up\"\n            style={{ position: \"fixed\", right: \"5%\", bottom: \"5%\" }}\n            onClick={goToTop}\n          >\n            <KeyboardArrowUpIcon />\n          </Fab>\n        ) : null}\n        <Filters\n          filter={filter}\n          setFilter={setFilter}\n          onChangeFilters={onChangeFilters}\n        />\n        <Grid container spacing={3}>\n          <MovieCard\n            movies={movies}\n            handlePage={handlePage}\n            loadMoreMovies={loadMoreMovies}\n          />\n          {loading && (\n            <Typography variant=\"h6\" style={{ color: \"#ffffff\" }}>\n              loading...\n            </Typography>\n          )}\n        </Grid>\n      </Container>\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,SAA9B,EAAyCC,IAAzC,EAA+CC,GAA/C,QAA0D,eAA1D;AACA,OAAOC,mBAAP,MAAgC,qCAAhC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,eAAe,SAASC,IAAT,GAAgB;EAAA,gBACDZ,QAAQ,CAAC,EAAD,CADP;EAAA;EAAA,IACtBa,MADsB;EAAA,IACdC,SADc;;EAAA,iBAECd,QAAQ,CAAC,KAAD,CAFT;EAAA;EAAA,IAEtBe,OAFsB;EAAA,IAEbC,UAFa;;EAAA,iBAGLhB,QAAQ,CAAC,CAAD,CAHH;EAAA;EAAA,IAGtBiB,IAHsB;EAAA,IAGhBC,OAHgB;;EAAA,iBAIDlB,QAAQ,CAAC,mBAAD,CAJP;EAAA;EAAA,IAItBmB,MAJsB;EAAA,IAIdC,SAJc;;EAAA,iBAKapB,QAAQ,CAAC,KAAD,CALrB;EAAA;EAAA,IAKtBqB,aALsB;EAAA,IAKPC,gBALO;;EAO7BrB,SAAS,CAAC,YAAM;IACdsB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;MACtCC,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;;MACA,IAAIJ,MAAM,CAACI,OAAP,GAAiB,GAArB,EAA0B;QACxBL,gBAAgB,CAAC,IAAD,CAAhB;MACD,CAFD,MAEO;QACLA,gBAAgB,CAAC,KAAD,CAAhB;MACD;IACF,CAPD;EAQD,CATQ,EASN,EATM,CAAT;;EAWA,IAAMM,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;IACjCT,SAAS,CAACS,KAAD,CAAT;EACD,CAFD;;EAIA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;IAC3Bd,UAAU,CAAC,IAAD,CAAV;IACAd,KAAK,CACF6B,GADH,wHAEoHd,IAFpH,yEAEuLE,MAFvL,GAIGa,IAJH,CAIQ,UAACC,GAAD,EAAS;MACb,IAAMpB,MAAM,GAAGoB,GAAG,CAACC,IAAJ,CAASC,OAAxB;MAEAtB,MAAM,CAACuB,OAAP,CAAe,UAACC,KAAD,EAAQC,KAAR,EAAkB;QAC/BxB,SAAS,CAAC,UAACyB,IAAD;UAAA,oCAAcA,IAAd,IAAoBF,KAApB;QAAA,CAAD,CAAT;MACD,CAFD;MAIArB,UAAU,CAAC,KAAD,CAAV;IACD,CAZH;EAaD,CAfD;;EAiBA,IAAMwB,UAAU,GAAG,SAAbA,UAAa,GAAM;IACvBtB,OAAO,CAAC,UAACqB,IAAD;MAAA,OAAUA,IAAI,GAAG,CAAjB;IAAA,CAAD,CAAP;EACD,CAFD;;EAIAtC,SAAS,CAAC,YAAM;IACd6B,cAAc;EACf,CAFQ,EAEN,CAACb,IAAD,CAFM,CAAT;EAIAhB,SAAS,CAAC,YAAM;IACde,UAAU,CAAC,IAAD,CAAV;IACAd,KAAK,CACF6B,GADH,wHAEoHd,IAFpH,yEAEuLE,MAFvL,GAIGa,IAJH,CAIQ,UAACC,GAAD,EAAS;MACb,IAAMpB,MAAM,GAAGoB,GAAG,CAACC,IAAJ,CAASC,OAAxB;MAEArB,SAAS,CAACD,MAAD,CAAT;MAEAG,UAAU,CAAC,KAAD,CAAV;IACD,CAVH;EAWD,CAbQ,EAaN,CAACG,MAAD,CAbM,CAAT;;EAeA,IAAMsB,OAAO,GAAG,SAAVA,OAAU,GAAM;IACpBlB,MAAM,CAACmB,QAAP,CAAgB;MACdC,GAAG,EAAE,CADS;MAEdC,QAAQ,EAAE;IAFI,CAAhB;EAID,CALD;;EAOA,oBACE;IAAK,KAAK,EAAE;MAAEC,UAAU,EAAE,mBAAd;MAAmCC,QAAQ,EAAE;IAA7C,CAAZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,eAEE,oBAAC,OAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,eAGE,oBAAC,SAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGzB,aAAa,gBACZ,oBAAC,GAAD;IACE,KAAK,EAAC,SADR;IAEE,cAAW,IAFb;IAGE,KAAK,EAAE;MAAEyB,QAAQ,EAAE,OAAZ;MAAqBC,KAAK,EAAE,IAA5B;MAAkCC,MAAM,EAAE;IAA1C,CAHT;IAIE,OAAO,EAAEP,OAJX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAME,oBAAC,mBAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EANF,CADY,GASV,IAVN,eAWE,oBAAC,OAAD;IACE,MAAM,EAAEtB,MADV;IAEE,SAAS,EAAEC,SAFb;IAGE,eAAe,EAAEQ,eAHnB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAXF,eAgBE,oBAAC,IAAD;IAAM,SAAS,MAAf;IAAgB,OAAO,EAAE,CAAzB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,SAAD;IACE,MAAM,EAAEf,MADV;IAEE,UAAU,EAAE2B,UAFd;IAGE,cAAc,EAAEV,cAHlB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,EAMGf,OAAO,iBACN,oBAAC,UAAD;IAAY,OAAO,EAAC,IAApB;IAAyB,KAAK,EAAE;MAAEkC,KAAK,EAAE;IAAT,CAAhC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAPJ,CAhBF,CAHF,CADF;AAmCD"},"metadata":{},"sourceType":"module"}